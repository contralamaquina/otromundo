<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Suculentas | Otro Mundo</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #ccc;
      font-family: 'Playfair Display', serif;
    }

    .container {
      position: relative;
      width: 100vw;
      height: 100vh;
    }

    .fondo-superior {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 3;
      pointer-events: none;
    }

    .suculenta-wrapper {
      position: absolute;
      overflow: hidden;
      z-index: 2;
      user-select: none;
    }

    .suculenta {
      position: absolute;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: opacity 0.6s ease, transform 0.6s ease;
      opacity: 1;
      cursor: pointer;
    }

    .suculenta.fade-out {
      opacity: 0;
      transform: translateX(-30px);
    }

    #nombre-suculenta {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      color: black;
      text-shadow: 0 0 5px rgba(0,0,0,0.6);
      z-index: 5;
      pointer-events: none;
      user-select: none;
    }

    #botones-tamano {
      position: absolute;
      display: flex;
      justify-content: space-between;
      z-index: 5;
      user-select: none;
    }

    .boton-tamano {
      border-radius: 12px;
      border: 1px solid #444;
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
      background-size: cover;
      background-position: center;
      box-shadow: 0 0 7px rgba(0,0,0,0.2);
    }

    .boton-tamano:hover {
      transform: scale(1.1);
      box-shadow: 0 0 15px #88bb44;
    }

    #pantalla-final {
      display: none;
      z-index: 10;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      user-select: none;
    }

    .opcion-final {
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
      margin: 10px 0;
    }

    .opcion-final:hover {
      transform: scale(1.05);
      box-shadow: 0 0 15px yellow;
    }

    #btn-volver {
      position: absolute;
      top: 5%;
      left: 5%;
      background-color: rgba(255,255,255,0.7);
      border: none;
      border-radius: 20px;
      padding: 8px 15px;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 0 6px rgba(0,0,0,0.3);
      display: none;
      z-index: 15;
      user-select: none;
      transition: background-color 0.3s;
    }
    #btn-volver:hover {
      background-color: rgba(255,255,255,0.95);
    }

    /* Indicaciones teclado y swipe */
    #indicacion-teclado {
      position: absolute;
      top: calc(3.5% + 495px + 10px); /* Justo debajo del cuadro (desktop) */
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.85);
      color: #333;
      padding: 8px 16px;
      font-size: 14px;
      border-radius: 12px;
      user-select: none;
      z-index: 12;
      width: max-content;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      white-space: nowrap;
      display: none;
      pointer-events: none;
    }
    #mano-swipe {
      position: absolute;
      bottom: 12%;
      left: 50%;
      transform: translateX(-50%);
      width: 50px;
      height: 50px;
      background: url('mano-swipe.svg') no-repeat center/contain;
      z-index: 12;
      display: none;
      pointer-events: none;
    }

    /* Desktop */
    @media (min-width: 769px) {
      .suculenta-wrapper {
        top: 3.5%;
        left: 47%;
        width: 495px;
        height: 495px;
      }
      #nombre-suculenta { top: 85%; font-size: 36px; }
      #pantalla-final {
        width: 495px;
        height: 495px;
        top: 3.5%;
        left: 47%;
        flex-direction: row;
      }
      .opcion-final { flex: 1; width: auto; }
      .boton-tamano { width: 90px; height: 90px; }
      #botones-tamano {
        top: 45%;
        left: 50%;
        transform: translateX(-50%);
        width: 65%;
      }
      #indicacion-teclado {
        display: block;
      }
      #mano-swipe {
        display: none;
      }
    }

    /* Mobile */
    @media (max-width: 768px) {
      .suculenta-wrapper {
        top: 20%;
        left: 10%;
        width: 80vw;
        height: 80vw;
      }
      #nombre-suculenta { top: 80%; font-size: 20px; }
      #pantalla-final {
        width: 80vw;
        height: 80vw;
        top: 20%;
        left: 10%;
        flex-direction: column;
      }
      .opcion-final { width: 90%; }
      .boton-tamano { width: 60px; height: 60px; }
      #botones-tamano {
        top: 50%;
        left: 50%;
        transform: translateX(-50%) translateY(-50%);
        width: 80%;
      }
      #indicacion-teclado {
        display: none;
      }
      #mano-swipe {
        display: block;
      }
    }
  </style>
</head>
<body>
  <div class="container">

    <div class="suculenta-wrapper" id="suculenta-wrapper">
      <img id="suculenta-img" class="suculenta" src="" alt="Imagen suculenta" style="display:none;">
      <img id="imagen-inicial" src="invitacion.png" alt="¡Tocá para comenzar!">
      <img id="invitacion-tamano" src="invitacion-tamano.jpg" alt="Elegí el tamaño ideal" style="display:none;">
      <div id="botones-tamano" style="display:none;">
        <div class="boton-tamano" id="tam-pequeno" title="Pequeño" style="background-image:url('tamano-pequeno.jpg');"></div>
        <div class="boton-tamano" id="tam-mediano" title="Mediano" style="background-image:url('tamano-mediano.jpg');"></div>
        <div class="boton-tamano" id="tam-grande" title="Grande" style="background-image:url('tamano-grande.jpg');"></div>
      </div>
      <img id="imagen-cargando" src="cargando.jpg" alt="Buscando imagen y precio..." />
      <div id="pantalla-final">
        <img class="opcion-final" src="con-maceta.jpg" alt="Con maceta" />
        <img class="opcion-final" src="sin-maceta.jpg" alt="Sin maceta" />
      </div>
    </div>

    <img src="fondo-con-agujero.png" class="fondo-superior" alt="Fondo con agujero"/>

    <div id="nombre-suculenta"></div>

    <button id="btn-volver">Volver</button>

    <!-- Indicaciones -->
    <div id="indicacion-teclado">Usá las flechas del teclado para cambiar la suculenta</div>
    <div id="mano-swipe"></div>

  </div>

  <script>
    const suculentas = Array.from({ length: 30 }, (_, i) => `suculenta${i + 1}.jpg`);
    const nombresSuculentas = ["Mammillaria Prolifera", "Cactus maní", "Sedum Musgo Dorado", "Gasteria Verrucosa", "Sedum Adolphi", "Senecio Articulatus", "Echeveria Setosa", "Hawortia Aeonium", "Callisia Navicularis", "Cereus Monstrosus", "Cactus maní", "Sedum Luteoviride", "Madreperla", "Corpuscularia", "Sedum Palmeri", "Echeveria Elegans", "Aloe Aristata", "Sedum rubrotinctum", "Orostachys", "Sedum Clavatum", "Graptosedum Sunset", "Sedum Guantes", "Siempreviva Arachnoideum", "Oscularia Deltoides", "Huernia Variada", "Orostachys", "Echeveria Setosa", "Pachyphytum Compactum", "Graptosedum Sunset", "Echeveria Elegans", "Hawortia Aeonium", "Haworthia Cuspidata"];

    let index = 0;
    let indexSeleccionado = null;
    let tamañoElegido = null;

    const img = document.getElementById("suculenta-img");
    const nombreDiv = document.getElementById("nombre-suculenta");
    const imgInicial = document.getElementById("imagen-inicial");
    const imgTamano = document.getElementById("invitacion-tamano");
    const botonesTamano = document.getElementById("botones-tamano");
    const imgCargando = document.getElementById("imagen-cargando");
    const pantallaFinal = document.getElementById("pantalla-final");
    const btnVolver = document.getElementById("btn-volver");

    function animarTexto(text) {
      nombreDiv.innerHTML = "";
      for (let i = 0; i < text.length; i++) {
        const span = document.createElement("span");
        span.textContent = text[i];
        span.style.opacity = 0;
        span.style.display = "inline-block";
        span.style.transform = "translateY(20px)";
        span.style.transition = "opacity 0.4s ease, transform 0.4s ease";
        nombreDiv.appendChild(span);
        setTimeout(() => {
          span.style.opacity = 1;
          span.style.transform = "translateY(0)";
        }, i * 80);
      }
    }

    function mostrarImagen() {
      const oldImg = img.cloneNode();
      oldImg.classList.add("fade-out");
      img.parentElement.insertBefore(oldImg, img);
      setTimeout(() => oldImg.remove(), 600);

      img.src = suculentas[index];
      img.style.display = "block";
      animarTexto(nombresSuculentas[index]);
    }

    function siguiente() {
      index = (index + 1) % suculentas.length;
      mostrarImagen();
    }

    function anterior() {
      index = (index - 1 + suculentas.length) % suculentas.length;
      mostrarImagen();
    }

    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowRight") siguiente();
      if (e.key === "ArrowLeft") anterior();
    });

    let startX = 0;
    const wrapper = document.getElementById("suculenta-wrapper");
    wrapper.addEventListener("touchstart", (e) => {
      startX = e.touches[0].clientX;
    });
    wrapper.addEventListener("touchend", (e) => {
      const delta = e.changedTouches[0].clientX - startX;
      if (delta > 50) anterior();
      else if (delta < -50) siguiente();
    });

    let fase = "inicio";

    function mostrarInicio() {
      fase = "inicio";
      imgInicial.style.display = "block";
      img.style.display = "none";
      nombreDiv.innerHTML = "";
      botonesTamano.style.display = "none";
      pantallaFinal.style.display = "none";
      imgCargando.style.display = "none";
      btnVolver.style.display = "none";
    }

    imgInicial.addEventListener("click", () => {
      fase = "seleccionSuculenta";
      imgInicial.style.display = "none";
      mostrarImagen();
      btnVolver.style.display = "block";
    });

    img.addEventListener("click", () => {
      if (fase !== "seleccionSuculenta") return;
      fase = "seleccionTamano";
      indexSeleccionado = index;
      img.style.display = "none";
      nombreDiv.innerHTML = "";
      imgTamano.style.display = "block";
      botonesTamano.style.display = "flex";
      btnVolver.style.display = "block";
    });

    function elegirTamaño(tam) {
      tamañoElegido = tam;
      fase = "seleccionMaceta";
      imgTamano.style.display = "none";
      botonesTamano.style.display = "none";
      pantallaFinal.style.display = "flex";
      btnVolver.style.display = "block";
    }

    document.getElementById("tam-pequeno").addEventListener("click", () => elegirTamaño("Pequeño"));
    document.getElementById("tam-mediano").addEventListener("click", () => elegirTamaño("Mediano"));
    document.getElementById("tam-grande").addEventListener("click", () => elegirTamaño("Grande"));

    function elegirMaceta(opcion) {
      if (fase !== "seleccionMaceta") return;

      const eleccionFinal = {
        suculenta: nombresSuculentas[indexSeleccionado],
        imagenSuculenta: suculentas[indexSeleccionado],
        tamaño: tamañoElegido,
        conMaceta: opcion === 'con'
      };

      fase = "cargando";
      pantallaFinal.style.display = "none";
      imgCargando.style.display = "block";
      btnVolver.style.display = "none";

      console.log("Elección final:", eleccionFinal);

      setTimeout(() => {
        alert(`¡Tu planta está lista!\nSuculenta: ${eleccionFinal.suculenta}\nTamaño: ${eleccionFinal.tamaño}\nCon maceta: ${eleccionFinal.conMaceta ? "Sí" : "No"}`);
        mostrarInicio();
      }, 3000);
    }

    btnVolver.addEventListener("click", () => {
      if (fase === "seleccionSuculenta") {
        mostrarInicio();
      } else if (fase === "seleccionTamano") {
        fase = "seleccionSuculenta";
        imgTamano.style.display = "none";
        botonesTamano.style.display = "none";
        img.style.display = "block";
        animarTexto(nombresSuculentas[indexSeleccionado]);
        btnVolver.style.display = "block";
      } else if (fase === "seleccionMaceta") {
        fase = "seleccionTamano";
        pantallaFinal.style.display = "none";
        imgTamano.style.display = "block";
        botonesTamano.style.display = "flex";
        btnVolver.style.display = "block";
      }
    });

    pantallaFinal.querySelectorAll(".opcion-final")[0].addEventListener("click", () => elegirMaceta("con"));
    pantallaFinal.querySelectorAll(".opcion-final")[1].addEventListener("click", () => elegirMaceta("sin"));

    mostrarInicio();
  </script>
</body>
</html>
